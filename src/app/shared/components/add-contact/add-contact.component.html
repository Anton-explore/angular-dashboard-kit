<div class="change-contact-wrapper">
  <app-loader *ngIf="showLoader$ | async"></app-loader>
  <h2 mat-dialog-title align="center" class="change-contact-header">
    {{ addContactHeading }}
  </h2>
  <mat-dialog-content class="change-contact-content">
    <form [formGroup]="contactForm" class="change-contact-form">
      <div class="change-contact-avatar-wrapper">
        <div class="change-contact-avatar-img-wrapper">
          <img [src]="getAvatarUrl()" alt="Avatar" />
          <button
            class="change-contact-avatar-btn"
            [ngClass]="{
              'hidden-button': contactForm.get('avatar')?.value !== ''
            }"
            (click)="avatarInputField.click()">
            +
          </button>
        </div>
        <input
          #avatarInputField
          type="file"
          id="avatar"
          hidden
          (change)="onAvatarChange($event)" />
        <label for="avatar">Add photo</label>
      </div>
      <mat-label for="firstName">{{ 'first name' | uppercase }}</mat-label>
      <mat-form-field class="form-field" appearance="outline">
        <input
          matInput
          type="text"
          id="firstName"
          formControlName="firstName"
          placeholder="First name" />
        <mat-error
          *ngIf="
            firstName?.invalid && (firstName?.dirty || firstName?.touched)
          ">
          {{ getErrorMessage('firstName') }}
        </mat-error>
      </mat-form-field>
      <mat-label for="lastName">{{ 'last name' | uppercase }}</mat-label>
      <mat-form-field class="form-field" appearance="outline">
        <input
          matInput
          type="text"
          id="lastName"
          formControlName="lastName"
          placeholder="Last name" />
        <mat-error
          *ngIf="lastName?.invalid && (lastName?.dirty || lastName?.touched)">
          {{ getErrorMessage('lastName') }}
        </mat-error>
      </mat-form-field>
      <mat-label for="email">{{ 'email' | uppercase }}</mat-label>
      <mat-form-field class="form-field" appearance="outline">
        <input
          matInput
          type="email"
          id="email"
          formControlName="email"
          placeholder="Email address" />
        <mat-error *ngIf="email?.invalid && (email?.dirty || email?.touched)">
          {{ getErrorMessage('email') }}
        </mat-error>
      </mat-form-field>
      <mat-label for="address">{{ 'address' | uppercase }}</mat-label>
      <mat-form-field class="form-field" appearance="outline">
        <input
          matInput
          type="text"
          id="address"
          formControlName="address"
          placeholder="Address" />
        <mat-error
          *ngIf="address?.invalid && (address?.dirty || address?.touched)">
          {{ getErrorMessage('address') }}
        </mat-error>
      </mat-form-field>
      <mat-error *ngIf="errorMessage">
        {{ errorMessage }}
      </mat-error>
    </form>
  </mat-dialog-content>
  <mat-dialog-actions align="center" class="change-contact-footer">
    <button
      mat-button
      class="change-contact-btn save-btn"
      (click)="onSubmit()"
      [disabled]="contactForm.invalid">
      Save
    </button>
    <button mat-button mat-dialog-close class="change-contact-btn cancel-btn">
      Cancel
    </button>
  </mat-dialog-actions>
</div>
